<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../../resources/template/template.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.prime.com.tr/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns="http://www.w3.org/1999/xhtml">

    <ui:define name="title">
        <h:outputText value="#{msg['menu.planning.transhipment_planning']}"/>
    </ui:define>

    <ui:define name="header">
        <h:outputText value="#{msg['menu.planning.transhipment_planning']}"/>
    </ui:define>

    <ui:define name="script">
        <script type="text/javascript">
            function handleRequestValidation(xhr, status, args) {
                if(args.validationFailed) {
                    jQuery('#dialog').show();
                } else {
                    dlgAdd.hide();
                }
            }

            function validateTranshipmentConstraint(xhr, status, args) {
                if(args.isConstraintNotEnough) {
                    allocationNotEnoughWarningDialog.show();
                }
            }
        </script>
    </ui:define>

    <ui:define name="content">
        <p:growl id="growl" showDetail="true" globalOnly="true"/>

        <p:tabView>
            <p:tab title="Transhipment List">
                <!--detail planning vessel utama-->
                <h:form id="formPlanningVessel">
                    <h:panelGrid id="vesselDetail" columns="4">
                        <h:outputLabel value="No PPKB" />
                        <h:outputLabel value=" : " />
                        <h:inputText value="#{transhipmentPlanningBean.noPPKB}" readonly="true" size="30" />
                        <p:commandButton onstart="freeze();" image="ui-icon-folder-open" value="..." onclick="showPlanningVessels();"/>
                        <h:outputLabel value="Vessel Name" />
                        <h:outputLabel value=" : " />
                        <h:inputText value="#{transhipmentPlanningBean.vessel[1]}" disabled="true" size="30"/>
                        <h:outputText />
                        <h:outputLabel value="Voyage In" />
                        <h:outputLabel value=" : " />
                        <h:inputText value="#{transhipmentPlanningBean.vessel[2]}" disabled="true" size="30"/>
                        <h:outputText />
                        <h:outputLabel value="Voyage Out" />
                        <h:outputLabel value=" : " />
                        <h:inputText value="#{transhipmentPlanningBean.vessel[3]}" disabled="true" size="30"/>
                        <h:outputText />
                    </h:panelGrid>
                </h:form>
                <p:spacer height="30px" width="0px" />
                <!--tabel view-->

                <p:accordionPanel autoHeight="false">
                    <p:tab title="Container Transhipment">
                        <h:form id="formTranshipmentList">
                            <p:dataTable id="tableTransDischarges" var="item" value="#{transhipmentPlanningBean.planningTransDischarges}"
                                         paginator="true" rows="10" paginatorPosition="bottom"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,15" rowIndexVar="number" selection="#{transhipmentPlanningBean.selectedTranshipments}">

                                <f:facet name="header">
                                    <div class="header-panel-single-left">
                                        <p:commandButton onstart="freeze();" image="ui-icon ui-icon-trash" value="#{msg['application.operation.delete_selected']}" disabled="#{empty transhipmentPlanningBean.planningTransDischarges}" action="#{transhipmentPlanningBean.handleDeleteAll}" oncomplete="confirmation.show();" />
                                    </div>
                                </f:facet>

                                <p:column selectionMode="multiple" />

                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="No." />
                                    </f:facet>
                                    <h:outputText value="#{number+1}." />
                                </p:column>

                                <p:column sortBy="#{item[0]}" filterBy="#{item[0]}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="BL No." />
                                    </f:facet>
                                    <h:outputText value="#{item[0]}" />
                                </p:column>

                                <p:column sortBy="#{item[1]}" filterBy="#{item[1]}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="Container No" />
                                    </f:facet>
                                    <h:outputText value="#{item[1]}" />
                                </p:column>

                                 <p:column sortBy="#{item[11]}" >
                                    <f:facet name="header">
                                        <h:outputText value="Size" />
                                    </f:facet>
                                    <h:outputText value="#{item[11]}" />
                                </p:column>

                                <p:column sortBy="#{item[2]}">
                                    <f:facet name="header">
                                        <h:outputText value="Type" />
                                    </f:facet>
                                    <h:outputText value="#{item[2]}" />
                                </p:column>

                                <p:column sortBy="#{item[4]}">
                                    <f:facet name="header">
                                        <h:outputText value="Gross" />
                                    </f:facet>
                                    <h:outputText value="#{item[4]}" />
                                </p:column>

                                <p:column sortBy="#{item[5]}">
                                    <f:facet name="header">
                                        <h:outputText value="Commodity" />
                                    </f:facet>
                                    <h:outputText value="#{item[5]}" />
                                </p:column>

                                <p:column sortBy="#{item[6]}" filterBy="#{item[6]}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="Next PPKB" />
                                    </f:facet>
                                    <h:outputText value="#{item[6]}" />
                                </p:column>

                                <p:column sortBy="#{item[7]}" filterBy="#{item[7]}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="Next Ship" />
                                    </f:facet>
                                    <h:outputText value="#{item[7]}" />
                                </p:column>

                                <p:column sortBy="#{item[8]}">
                                    <f:facet name="header">
                                        <h:outputText value="Voy In" />
                                    </f:facet>
                                    <h:outputText value="#{item[8]}" />
                                </p:column>

                                <p:column sortBy="#{item[9]}">
                                    <f:facet name="header">
                                        <h:outputText value="Voy Out" />
                                    </f:facet>
                                    <h:outputText value="#{item[9]}" />
                                </p:column>

                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Action" />
                                    </f:facet>
                                    <center>
                                        <p:commandButton onstart="freeze();" actionListener="#{transhipmentPlanningBean.handleEditDeleteButton}" image="ui-icon-trash" title="Delete PlanningTransDischarge" oncomplete="confirmation.show();">
                                            <f:attribute name="idCont" value="#{item[10]}"/>
                                        </p:commandButton>
                                    </center>
                                </p:column>
                            </p:dataTable>
                        </h:form>
                    </p:tab>

                    <p:tab title="Uncontainerized Transhipment">
                        <h:form id="uncontainerized">
                            <p:dataTable id="tableTransDischarges" var="item" value="#{transhipmentPlanningBean.uncontainerizedAfterList}"
                                         paginator="true" rows="10" paginatorPosition="bottom"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,15" rowIndexVar="number" >

                                <f:facet name="header">
                                    <div class="header-panel-single-left">
                                        <h:outputLabel value=""/>
                                    </div>
                                </f:facet>

                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="No." />
                                    </f:facet>
                                    <h:outputText value="#{number+1}." />
                                </p:column>

                                <p:column sortBy="#{item[1]}" filterBy="#{item[1]}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="Bl No" />
                                    </f:facet>
                                    <h:outputText value="#{item[1]}" />
                                </p:column>

                                <p:column sortBy="#{item[2]}">
                                    <f:facet name="header">
                                        <h:outputText value="Comodity" />
                                    </f:facet>
                                    <h:outputText value="#{item[2]}" />
                                </p:column>

                                <p:column sortBy="#{item[3]}">
                                    <f:facet name="header">
                                        <h:outputText value="Weight" />
                                    </f:facet>
                                    <h:outputText value="#{item[3]}" />
                                </p:column>

                                <p:column sortBy="#{item[6]}">
                                    <f:facet name="header">
                                        <h:outputText value="Unit" />
                                    </f:facet>
                                    <h:outputText value="#{item[6]}" />
                                </p:column>

                                <p:column sortBy="#{item[4]}">
                                    <f:facet name="header">
                                        <h:outputText value="Truck Loosing" />
                                    </f:facet>
                                    <h:outputText value="#{item[4]}" />
                                </p:column>

                                <p:column sortBy="#{item[7]}">
                                    <f:facet name="header">
                                        <h:outputText value="Block" />
                                    </f:facet>
                                    <h:outputText value="#{item[7]}" />
                                </p:column>

                                <p:column sortBy="#{item[8]}" filterBy="#{item[8]}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="Load Port" />
                                    </f:facet>
                                    <h:outputText value="#{item[8]}" />
                                </p:column>

                                <p:column sortBy="#{item[9]}" filterBy="#{item[9]}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="Disch Port" />
                                    </f:facet>
                                    <h:outputText value="#{item[9]}" />
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Action" />
                                    </f:facet>
                                    <center>
                                        <p:commandButton onstart="freeze();" actionListener="#{transhipmentPlanningBean.handleSelectNewNoPpkbUc}" disabled="#{not item[10].equals('PLANNING')}" image="ui-icon-trash" title="Delete PlanningTransDischarge" oncomplete="confirmation2.show();">
                                            <f:attribute name="idCont" value="#{item[0]}"/>
                                        </p:commandButton>
                                    </center>
                                </p:column>
                                <f:facet name="footer">
                                    <div class="header-panel-single-right">
                                        <h:outputLabel value=""/>
                                    </div>
                                </f:facet>
                            </p:dataTable>
                        </h:form>
                    </p:tab>
                </p:accordionPanel>
            </p:tab>
            <p:tab title="Add Transhipment">
                <h:form id="formNewVessel">
                    <!--view untuk kedua planning vessel-->
                    <h:panelGrid columns="3">
                        <p:fieldset legend="previous ship">
                            <h:panelGrid id="planningVesselDetail" columns="3">
                                <h:outputLabel value="No PPKB" />
                                <h:outputLabel value=" : " />
                                <h:inputText value="#{transhipmentPlanningBean.vessel[0]}" disabled="true" size="30"/>
                                <h:outputLabel value="Vessel Name" />
                                <h:outputLabel value=" : " />
                                <h:inputText value="#{transhipmentPlanningBean.vessel[1]}" disabled="true" size="30"/>
                                <h:outputLabel value="Voyage In" />
                                <h:outputLabel value=" : " />
                                <h:inputText value="#{transhipmentPlanningBean.vessel[2]}" disabled="true" size="30"/>
                                <h:outputLabel value="Voyage Out" />
                                <h:outputLabel value=" : " />
                                <h:inputText value="#{transhipmentPlanningBean.vessel[3]}" disabled="true" size="30"/>
                            </h:panelGrid>
                        </p:fieldset>
                        <p:spacer width="20px" height="0px" />
                        <p:fieldset legend="next ship">
                            <h:panelGrid id="newPlanningVesselDetail" columns="5">
                                <h:outputLabel value="No PPKB" />
                                <h:outputLabel value=" : " />
                                <h:inputText value="#{transhipmentPlanningBean.newPPKB}" readonly="true" size="30"/>
                                <p:commandButton onstart="freeze();" disabled="#{empty transhipmentPlanningBean.vessel[0]}" image="ui-icon-folder-open" value="..." onclick="showLoadablePlanningVessels();"/>
                                <p:commandButton id="clearButton" onstart="freeze();" disabled="#{empty transhipmentPlanningBean.newVessel[0]}" value="#{msg['application.operation.clear']}" action="#{transhipmentPlanningBean.clearNewPPKB}" update="formNewVessel:newPlanningVesselDetail"/>
                                <h:outputLabel value="Vessel Name" />
                                <h:outputLabel value=" : " />
                                <h:inputText value="#{transhipmentPlanningBean.newVessel[1]}" disabled="true" size="30"/>
                                <h:outputText />
                                <h:outputText />
                                <h:outputLabel value="Voyage In" />
                                <h:outputLabel value=" : " />
                                <h:inputText value="#{transhipmentPlanningBean.newVessel[2]}" disabled="true" size="30"/>
                                <h:outputText />
                                <h:outputText />
                                <h:outputLabel value="Voyage Out" />
                                <h:outputLabel value=" : " />
                                <h:inputText value="#{transhipmentPlanningBean.newVessel[3]}" disabled="true" size="30"/>
                                <h:outputText />
                                <h:outputText />
                            </h:panelGrid>
                        </p:fieldset>
                    </h:panelGrid>
                </h:form>
                <p:spacer height="30px" width="0px" />
                <p:accordionPanel autoHeight="false">
                    <p:tab title="Container Transhipment">
                        <h:form id="formAddTranshipment">
                            <!--daftar container yang bisa di transhipment-->
                            <p:dataTable id="transDischargesTable" var="item" value="#{transhipmentPlanningBean.baplieDischarges}"
                                         paginator="true" rows="10" paginatorPosition="bottom"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,15" rowIndexVar="number" selection="#{transhipmentPlanningBean.selectedContainers}">

                                <f:facet name="header">
                                    <h:outputText value="&nbsp;"/>
                                </f:facet>

                                <p:column selectionMode="multiple" />

                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="No." />
                                    </f:facet>
                                    <h:outputText value="#{number+1}." />
                                </p:column>

                                <p:column sortBy="#{item[0]}" filterBy="#{item[0]}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="Bl No" />
                                    </f:facet>
                                    <h:outputText value="#{item[0]}" />
                                </p:column>

                                <p:column sortBy="#{item[1]}" filterBy="#{item[1]}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="Container No" />
                                    </f:facet>
                                    <h:outputText value="#{item[1]}" />
                                </p:column>

                                <p:column sortBy="#{item[2]}">
                                    <f:facet name="header">
                                        <h:outputText value="Size" />
                                    </f:facet>
                                    <h:outputText value="#{item[2]}" />
                                </p:column>

                                <p:column sortBy="#{item[3]}">
                                    <f:facet name="header">
                                        <h:outputText value="Type" />
                                    </f:facet>
                                    <h:outputText value="#{item[3]}" />
                                </p:column>

                                <p:column sortBy="#{item[5]}">
                                    <f:facet name="header">
                                        <h:outputText value="Gross" />
                                    </f:facet>
                                    <h:outputText value="#{item[5]}" />
                                </p:column>

                                <p:column sortBy="#{item[6]}">
                                    <f:facet name="header">
                                        <h:outputText value="Commodity" />
                                    </f:facet>
                                    <h:outputText value="#{item[6]}" />
                                </p:column>

                                <p:column sortBy="#{item[7]}">
                                    <f:facet name="header">
                                        <h:outputText value="Seal No" />
                                    </f:facet>
                                    <h:outputText value="#{item[7]}" />
                                </p:column>

                                <p:column sortBy="#{item[8]}">
                                    <f:facet name="header">
                                        <h:outputText value="Bay" />
                                    </f:facet>
                                    <h:outputText value="#{item[8]}" />
                                </p:column>

                                <p:column sortBy="#{item[9]}">
                                    <f:facet name="header">
                                        <h:outputText value="Row" />
                                    </f:facet>
                                    <h:outputText value="#{item[9]}" />
                                </p:column>

                                <p:column sortBy="#{item[10]}">
                                    <f:facet name="header">
                                        <h:outputText value="Tier" />
                                    </f:facet>
                                    <h:outputText value="#{item[10]}" />
                                </p:column>

                                <p:column sortBy="#{item[11]}">
                                    <f:facet name="header">
                                        <h:outputText value="Load Port" />
                                    </f:facet>
                                    <h:outputText value="#{item[11]}" />
                                </p:column>

                                <p:column sortBy="#{item[12]}">
                                    <f:facet name="header">
                                        <h:outputText value="Disch Port" />
                                    </f:facet>
                                    <h:outputText value="#{item[12]}" />
                                </p:column>
                                <f:facet name="footer">
                                    <p:outputPanel id="submitTranshipmentButton">
                                        <div class="header-panel-single-right">
                                            <p:commandButton onstart="freeze();" image="ui-icon-check" value="#{msg['application.operation.submit']}" disabled="#{transhipmentPlanningBean.vessel[0] or empty transhipmentPlanningBean.newPPKB}" action="#{transhipmentPlanningBean.submit}" update="formTranshipmentList:tableTransDischarges formNewVessel:newPlanningVesselDetail formAddTranshipment:transDischargesTable allocationNotEnoughForm growl" oncomplete="validateTranshipmentConstraint(xhr, status, args);" />
                                        </div>
                                    </p:outputPanel>
                                </f:facet>
                            </p:dataTable>
                        </h:form>
                    </p:tab>
                    <p:tab title="Uncontainerized Transhipment">
                        <h:form id="uncontainerizedList">
                            <p:dataTable id="tableTransDischarges" var="item" value="#{transhipmentPlanningBean.uncontainerizedList}"
                                         paginator="true" rows="10" paginatorPosition="bottom"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,15" rowIndexVar="number" selection="#{transhipmentPlanningBean.selectedContainerUc}">

                                <f:facet name="header">
                                    <div class="header-panel-single-left">
<!--                                        <p:commandButton onstart="freeze();" image="ui-icon ui-icon-trash" value="{msg['application.operation.delete_all']}" disabled="{empty transhipmentPlanningBean.planningTransDischarges}" action="{transhipmentPlanningBean.handleDeleteAll}" oncomplete="confirmation.show();" />-->
                                        <h:outputLabel value="">&nbsp;</h:outputLabel>
                                    </div>
                                </f:facet>

                                <p:column selectionMode="multiple" />

                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="No." />
                                    </f:facet>
                                    <h:outputText value="#{number+1}." />
                                </p:column>

                                <p:column sortBy="#{item[1]}" filterBy="#{item[1]}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="Bl No" />
                                    </f:facet>
                                    <h:outputText value="#{item[1]}" />
                                </p:column>

                                <p:column sortBy="#{item[2]}">
                                    <f:facet name="header">
                                        <h:outputText value="Comodity" />
                                    </f:facet>
                                    <h:outputText value="#{item[2]}" />
                                </p:column>

                                <p:column sortBy="#{item[3]}">
                                    <f:facet name="header">
                                        <h:outputText value="Weight" />
                                    </f:facet>
                                    <h:outputText value="#{item[3]}" />
                                </p:column>

                                <p:column sortBy="#{item[6]}">
                                    <f:facet name="header">
                                        <h:outputText value="Unit" />
                                    </f:facet>
                                    <h:outputText value="#{item[6]}" />
                                </p:column>

                                <p:column sortBy="#{item[4]}">
                                    <f:facet name="header">
                                        <h:outputText value="Truck Loosing" />
                                    </f:facet>
                                    <h:outputText value="#{item[4]}" />
                                </p:column>

                                <p:column sortBy="#{item[7]}">
                                    <f:facet name="header">
                                        <h:outputText value="Block" />
                                    </f:facet>
                                    <h:outputText value="#{item[7]}" />
                                </p:column>

                                <p:column sortBy="#{item[8]}" filterBy="#{item[8]}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="Load Port" />
                                    </f:facet>
                                    <h:outputText value="#{item[8]}" />
                                </p:column>

                                <p:column sortBy="#{item[9]}" filterBy="#{item[9]}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText value="Disch Port" />
                                    </f:facet>
                                    <h:outputText value="#{item[9]}" />
                                </p:column>
                                <f:facet name="footer">
                                    <div class="header-panel-single-right">
                                        <p:commandButton onstart="freeze();" image="ui-icon-check" value="#{msg['application.operation.submit']}" disabled="#{transhipmentPlanningBean.vessel[0] or empty transhipmentPlanningBean.uncontainerizedList}" action="#{transhipmentPlanningBean.submitUc}" update="formTranshipmentList:tableTransDischarges formNewVessel:newPlanningVesselDetail formAddTranshipment:transDischargesTable uncontainerized:tableTransDischarges uncontainerizedList:tableTransDischarges growl" />
                                    </div>
                                </f:facet>
                            </p:dataTable>
                        </h:form>
                    </p:tab>
                </p:accordionPanel>
            </p:tab>
        </p:tabView>

        <!--dialog untuk planning vessel yang utama-->
        <p:dialog header="Planning Vessels"  widgetVar="planningVesselsDialog" modal="true" minWidth="750">
            <h:form id="planningVesselsForm">
                <p:dataTable var="item" value="#{transhipmentPlanningBean.planningVessels}"
                             id="planningVesselsTable"  widgetVar="planningVesselsTable"
                             paginator="true" rows="10"
                             paginatorPosition="bottom"
                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="5,10,15" rowIndexVar="number">

                    <f:facet name="header">
                        <h:outputText value="&nbsp;"/>
                    </f:facet>

                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="No." />
                        </f:facet>
                        <h:outputText value="#{number+1}." />
                    </p:column>

                    <p:column  filterMatchMode="contains" filterBy="#{item[0]}" sortBy="#{item[0]}">
                        <f:facet name="header">
                            <h:outputText value="No PPKB" />
                        </f:facet>
                        <h:outputText value="#{item[0]}" />
                    </p:column>

                    <p:column  filterMatchMode="contains" filterBy="#{item[1]}" sortBy="#{item[1]}">
                        <f:facet name="header">
                            <h:outputText value="Vessel Name" />
                        </f:facet>
                        <h:outputText value="#{item[1]}" />
                    </p:column>

                    <p:column sortBy="#{item[2]}">
                        <f:facet name="header">
                            <h:outputText value="Voyage In" />
                        </f:facet>
                        <h:outputText value="#{item[2]}" />
                    </p:column>

                    <p:column sortBy="#{item[3]}">
                        <f:facet name="header">
                            <h:outputText value="Voyage Out" />
                        </f:facet>
                        <h:outputText value="#{item[3]}" />
                    </p:column>

                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Action" />
                        </f:facet>
                        <p:commandButton onstart="freeze();" actionListener="#{transhipmentPlanningBean.handleSelectNoPpkb}" value="select" update="uncontainerizedList:tableTransDischarges uncontainerized formPlanningVessel:vesselDetail formTranshipmentList:tableTransDischarges formNewVessel:planningVesselDetail formNewVessel:newPlanningVesselDetail formAddTranshipment:transDischargesTable" oncomplete="planningVesselsDialog.hide();">
                            <f:attribute name="noPpkb" value="#{item[0]}"/>
                        </p:commandButton>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <!--form untuk planning vessel tujuan-->
        <p:dialog header="Loadable Planning Vessels"  widgetVar="loadablePlanningVesselsDialog" modal="true" minWidth="750">
            <h:form id="loadablePlanningVesselsForm">
                <p:dataTable var="item" value="#{transhipmentPlanningBean.loadablePlanningVessels}"
                             id="loadablePlanningVesselsTable"  widgetVar="loadablePlanningVesselsTable"
                             paginator="true" rows="10"
                             paginatorPosition="bottom"
                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="5,10,15" rowIndexVar="number">

                    <f:facet name="header">
                        <h:outputText value="&nbsp;"/>
                    </f:facet>

                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="No." />
                        </f:facet>
                        <h:outputText value="#{number+1}." />
                    </p:column>

                    <p:column  filterMatchMode="contains" filterBy="#{item[0]}" sortBy="#{item[0]}">
                        <f:facet name="header">
                            <h:outputText value="No PPKB" />
                        </f:facet>
                        <h:outputText value="#{item[0]}" />
                    </p:column>

                    <p:column  filterMatchMode="contains" filterBy="#{item[1]}" sortBy="#{item[1]}">
                        <f:facet name="header">
                            <h:outputText value="Vessel Name" />
                        </f:facet>
                        <h:outputText value="#{item[1]}" />
                    </p:column>

                    <p:column sortBy="#{item[2]}">
                        <f:facet name="header">
                            <h:outputText value="Voyage In" />
                        </f:facet>
                        <h:outputText value="#{item[2]}" />
                    </p:column>

                    <p:column sortBy="#{item[3]}">
                        <f:facet name="header">
                            <h:outputText value="Voyage Out" />
                        </f:facet>
                        <h:outputText value="#{item[3]}" />
                    </p:column>

                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Action" />
                        </f:facet>
                        <p:commandButton onstart="freeze();" actionListener="#{transhipmentPlanningBean.handleSelectNewNoPpkb}" value="select" update="formNewVessel:newPlanningVesselDetail formAddTranshipment:transDischargesTable:submitTranshipmentButton" oncomplete="loadablePlanningVesselsDialog.hide();">
                            <f:attribute name="newNoPpkb" value="#{item[0]}"/>
                        </p:commandButton>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>
        
        <!--dialog untuk konfirmasi menghapus-->
        <p:dialog header="#{msg['application.header.confirm.delete']}"  widgetVar="confirmation">
            <h:form>
                <p:panel>
                    <h:outputText value="Are you sure you want to delete this file?" />
                    <f:facet name="footer">
                        <div class="header-panel-single-right">
                            <p:commandButton onstart="freeze();" value="#{msg['application.operation.yes']}"  action="#{transhipmentPlanningBean.delete}"  update="formTranshipmentList:tableTransDischarges formAddTranshipment:transDischargesTable growl" onclick="confirmation.hide();" />
                            <p:commandButton onstart="freeze();" value="#{msg['application.operation.no']}" onclick="confirmation.hide()" type="button" />
                        </div>
                    </f:facet>
                </p:panel>
            </h:form>
        </p:dialog>

        <p:dialog header="Warning"  widgetVar="allocationNotEnoughWarningDialog" modal="true" width="900" resizable="false">
            <h:form id="allocationNotEnoughForm">
                <h:outputLabel escape="false" style="font-size: 12px;" value="#{fn:replace(msg['application.validation.not_enough_transhipment_allocation'],':noPpkb',transhipmentPlanningBean.newPlanningVessel.noPpkb)}"/>
                <p:dataTable var="item" value="#{transhipmentPlanningBean.loadPlanningAllocationsInfo}"
                         id="loadPlanningAllocationsInfoTable"  widgetVar="loadPlanningAllocationsInfoTable"
                          rowStyleClass="#{item[11] lt item[10] ? 'false-row' : null}">
                    <f:facet name="header">
                        <h:outputText value="&nbsp;"/>
                    </f:facet>
                    <f:facet name="footer">
                        <h:outputText value="&nbsp;"/>
                    </f:facet>

                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Discharge Port" />
                        </f:facet>
                        <h:outputText value="#{item[0]}" />
                    </p:column>

                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Cont Type" />
                        </f:facet>
                        <h:outputText value="#{item[2]}" />
                    </p:column>

                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Gross Class" />
                        </f:facet>
                        <h:outputText value="#{item[4]}" />
                    </p:column>

                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Cont Size" />
                        </f:facet>
                        <h:outputText value="#{item[5]}" />
                    </p:column>

                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Cont Status" />
                        </f:facet>
                        <h:outputText value="#{item[6]}" />
                    </p:column>

                    <p:column style="text-align:center;">
                        <f:facet name="header">
                            <h:outputText value="Over Size" />
                        </f:facet>
                        <h:outputText value="#{item[7] ? 'yes' : 'no'}" />
                    </p:column>

                    <p:column style="text-align:center;">
                        <f:facet name="header">
                            <h:outputText value="Dangerous" />
                        </f:facet>
                        <h:outputText value="#{item[8] ? 'yes' : 'no'}" />
                    </p:column>

                    <p:column style="text-align:center;">
                        <f:facet name="header">
                            <h:outputText value="Is Export" />
                        </f:facet>
                        <h:outputText value="#{item[9] ? 'yes' : 'no'}" />
                    </p:column>

                    <p:column style="text-align:center;">
                        <f:facet name="header">
                            <h:outputText value="Required" />
                        </f:facet>
                        <h:outputText value="#{item[10]}" />
                    </p:column>

                    <p:column style="text-align:center;">
                        <f:facet name="header">
                            <h:outputText value="Allocated" />
                        </f:facet>
                        <h:outputText style="#{item[11] lt item[10] ? 'color: red;' : null}" value="#{item[11]}" />
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <!--dialog untuk konfirmasi menghapus-->
        <p:dialog header="#{msg['application.header.confirm.delete']}"  widgetVar="confirmation2">
            <h:form>
                <p:panel>
                    <h:outputText value="Are you sure you want to delete this file?" />
                    <f:facet name="footer">
                        <div class="header-panel-single-right">
                            <p:commandButton onstart="freeze();" value="#{msg['application.operation.yes']}"  actionListener="#{transhipmentPlanningBean.deleteUc}"  update="uncontainerized:tableTransDischarges uncontainerizedList:tableTransDischarges growl" onclick="confirmation2.hide();" />
                            <p:commandButton onstart="freeze();" value="#{msg['application.operation.no']}" onclick="confirmation2.hide()" type="button" />
                        </div>
                    </f:facet>
                </p:panel>
            </h:form>
        </p:dialog>

        <h:form>
            <p:remoteCommand name="showPlanningVessels" onstart="freeze();" immediate="true" oncomplete="planningVesselsDialog.show();planningVesselsTable.clearFilters();" update="planningVesselsForm:planningVesselsTable" actionListener="#{transhipmentPlanningBean.handleShowPlanningVessels}"/>
            <p:remoteCommand name="showLoadablePlanningVessels" onstart="freeze();" immediate="true" oncomplete="loadablePlanningVesselsDialog.show();loadablePlanningVesselsTable.clearFilters();" update="loadablePlanningVesselsForm:loadablePlanningVesselsTable" actionListener="#{transhipmentPlanningBean.handleShowLoadablePlanningVessels}"/>
        </h:form>
    </ui:define>

</ui:composition>
